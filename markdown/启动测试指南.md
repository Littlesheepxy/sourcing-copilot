# Boss直聘Sourcing智能助手启动测试指南

本文档提供了如何启动和测试Boss直聘Sourcing智能助手的Web应用和Chrome扩展的详细步骤。

## 前置条件

确保系统已安装以下软件：
- Node.js 16+
- npm 或 yarn
- Chrome浏览器

## 1. 项目准备

首先，确保已安装所有依赖：

```bash
# 在项目根目录执行
npm install
```

## 2. 启动Web应用

Web应用使用Next.js开发，可通过以下命令启动：

```bash
# 在项目根目录执行
npm run dev:web
```

启动后，Web应用将在默认端口（通常是3000）运行。访问浏览器打开：
- http://localhost:3000

## 3. 构建和测试Chrome扩展

### 3.1 构建扩展

```bash
# 开发模式（实时监听文件变化并重新构建）
npm run dev:extension

# 或者生产模式构建
npm run build:extension
```

开发模式下，webpack会监听文件变化并自动重新构建扩展文件。

### 3.2 安装扩展到Chrome

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目中的 `extension/dist` 目录

### 3.3 测试扩展功能

1. 安装完成后，在Chrome工具栏中应该能看到扩展图标
2. 访问 Boss直聘网站（https://www.zhipin.com）
3. 点击扩展图标，打开扩展弹出窗口
4. 通过弹出窗口可以：
   - 切换操作模式（校准/自动）
   - 查看简单数据统计
   - 打开侧边栏控制面板

5. 在Boss直聘推荐页面上，扩展的内容脚本将自动运行：
   - 在校准模式下：显示人工标记界面
   - 在自动模式下：根据规则自动筛选并打招呼

## 4. 同时运行Web和扩展（推荐测试方式）

最佳的测试方法是同时运行Web应用和Chrome扩展，以测试它们之间的数据共享和功能集成：

```bash
# 终端1：启动Web应用
npm run dev:web

# 终端2：构建并监视扩展变化
npm run dev:extension
```

## 5. 常见问题排查

### Web应用无法启动
- 检查端口是否被占用
- 确认Next.js配置文件是否正确

### Chrome扩展不工作
- 检查构建是否成功，查看 `extension/dist` 目录是否存在
- 确认Chrome扩展权限是否足够
- 查看Chrome开发者工具的控制台是否有错误信息

### 跨环境数据同步问题
- 确认存储适配器配置正确
- 检查是否使用了正确的数据存储机制（Web应用使用IndexedDB，扩展使用Chrome Storage API）

## 6. 调试技巧

### Web应用调试
- 使用Chrome DevTools的React开发工具
- 利用Next.js内置的错误提示

### Chrome扩展调试
- 点击扩展管理页面中的"背景页"链接，查看后台服务worker的控制台
- 在目标页面上右键选择"检查"，打开DevTools后切换到"Console"标签页查看内容脚本的日志
- 在扩展管理页面点击"重新加载"按钮，快速应用最新的代码变更

## 7. 生产构建

完成测试后，可以生成生产版本：

```bash
# 构建Web应用和Chrome扩展的生产版本
npm run build
```

生产构建的Web应用位于 `web-app/.next` 目录，Chrome扩展位于 `extension/dist` 目录。 